---
# This file contains the existing capacity in Spain for the reference year.
# ----------------------------------------------------------------------
# Notes:
# We set energy_cap_max and min equal to the installed capacity in Spain in 2015
# *1: Alonso-Tristán et al (2011) defines a 73% share for reservoir and 27% for run of river
# *2: We set this condition as follows: "If PNIEC plans an increase or stationary state of a specific technology, then the min and max are set to equal values.
#     However, if the plan foresees a decrease in power capacity, we will allow the spanish_model to choose between the baseline capacity and 0
#3* Data from existing hydro technologies has been taken from https://energia.serviciosmin.gob.es/Reprov2/RegistroPublico. It has been filtered only for continental data
# No information regardining vulnerability costs entail 0 values


#templates:
 # pv:
  #  base_tech: supply
  #  carrier_out: electricity
   # lifetime: 25 # [@JRC:2014] Table 7

techs:
    existing_wind_onshore: # Danish energy data 20 Onshore turbines-2020
      name: 'existing onshore wind'
      base_tech: supply
      template: interest_rate_existing
      carrier_out: electricity
      source_unit: per_cap
      lifetime: 27 # [@JRC:2014] Table 4
      cost_flow_cap:
        data: [ 0 ] # existing tech
        index: [ monetary ]
        dims: [ costs ]
      cost_om_annual:
        data: [16397] #  | Danish energy agency (technology data for el/dh, 20 onshore turbines, 2050)
        index: [monetary]
        dims: [costs]
      cost_flow_out:
        data: [2.11] #| Danish energy agency (technology data for el/dh, 20 onshore turbines, 2050)
        index: [monetary]
        dims: [costs]


    existing_oil_and_other:  # JRC 2017 https://data.jrc.ec.europa.eu/dataset/jrc-etri-techno-economics-larger-heating-cooling-technologies-2017
        name: 'Other existing fossil fuels plant' # 4.1.2.3OilFireWaterTubeB
        base_tech: conversion
        template: interest_rate_existing
        carrier_out: electricity
        carrier_in: oil
        flow_out_eff: 0.35 #assumption
        #flow_out_min_relative: 0.1 # Italy spanish_model
        energy_ramping: 0.05 #assumption
        lifetime: 35
        cost_flow_cap:
          data: [0] # €/kW
          index: [monetary]
          dims: [costs]
        cost_om_annual:
          data: [2000] # €/MW/year
          index: [monetary]
          dims: [costs]
        cost_flow_out:
          data: [0.3] # €/MWh
          index: [monetary]
          dims: [costs]

    existing_pumped_hydro: # 160 Pumped hydro storage -2020
        name: 'Existing Pumped hydro pure'
        carrier_in: electricity
        carrier_out: electricity
        template: interest_rate_existing
        base_tech: storage
        flow_out_eff: 0.75 # Italy spanish_model
        lifetime: 50
        flow_capacity_per_storage_cap_max: 0.167
        flow_capacity_per_storage_cap_min: 0.167
        storage_cap_max: .inf
        # storage_cap_equals: 46252600 #kWh Italy spanish_model # Fixed -- outdated
        cost_flow_cap: # Existing technology
          data: [ 0 ] # €/kW
          index: [ monetary ]
          dims: [ costs ]
        cost_om_annual:
          data: [8507]
          index: [monetary]
          dims: [costs]

    existing_chp:
        name: 'Combined heat and power'
        base_tech: conversion
        template: interest_rate_existing
        carrier_in: natural_gas
        carrier_out: electricity
        #flow_out_min_relative: 0.3 # Italy spanish_model
        energy_ramping: 0.2
        flow_out_eff: 0.47 #  [Technology Data for Generation of Electricity and District Heating, Danish Energy Agency]
        lifetime: 25
        cost_flow_cap:
          data: [0] # Existing
          index: [monetary]
          dims: [costs]
        cost_om_annual:
          data: [10633.72] # , Danish energy agency (technology data for el/dh, 06 gas engines, 2050)
          index: [monetary]
          dims: [costs]
        cost_flow_out:
            data: [5.74] #  Danish energy agency (technology data for el/dh, 06 gas engines, 2050)
            index: [monetary]
            dims: [costs]

    existing_biomass:
        name: "Existing Solid biomass power plant"
        base_tech: supply
        carrier_out: electricity
        template: interest_rate_existing
        flow_out_eff: 0.28 # Danish energy agency (technology data for el/dh, Woodchips 2030)
        #flow_out_min_relative: 0.3 # Italy spanish_model
        lifetime: 25 # Danish energy agency (technology data for el/dh, Woodchips 2030)
        energy_ramping: 0.10
        source_use_max: .inf
        cost_flow_cap:
          data: [0] # existing
          index: [monetary]
          dims: [costs]
        cost_om_annual:
          data: [163759.40] # e/MW/year Danish energy agency (technology data for el/dh, Woodchips 2030)
          index: [monetary]
          dims: [costs]
        cost_flow_out:
          data: [4.77] # e/MWh Italy spanish_model Danish energy agency (technology data for el/dh, Woodchips 2030)
          index: [monetary]
          dims: [costs]
        cost_om_con:
          data: [150]  # Brichs et al 2021
          index: [monetary]
          dims: [costs]


    existing_biogas_to_electricity_supply: # 06 Gas engines, biogas, danishe energy agency
        name: Existing Electricity from anaerobically digested biofuel
        base_tech: supply
        template: interest_rate_existing
        include_storage: true
        carrier_out: electricity
        flow_out_eff: 0.4 # efficiency modelled within the input resource stream to avoid poor numerical scaling
        lifetime: 25
        #flow_out_min_relative: 0.3
        storage_cap_max: .inf
        flow_capacity_per_storage_cap_max: 0.0033
        flow_capacity_per_storage_cap_min: 0.0033
        energy_ramping: 0.10
        cost_flow_cap:
          data: [0] # Existing
          index: [monetary]
          dims: [costs]
        cost_om_annual:
          data: [10367.884]  # 06 Gas engines, biogas
          index: [monetary]
          dims: [costs]
        cost_flow_out:
          data: [7.976] # # 06 Gas engines, biogas
          index: [monetary]
          dims: [costs]
        cost_om_con:
          data: [63.45908437668863] # (EUR/MWh)]
          index: [monetary]
          dims: [costs]

    existing_hydro_run_of_river: # https://jeodpp.jrc.ec.europa.eu/ftp/jrc-opendata/JRCOD/ETRI/datasets/10003/LATEST/
        name: Existing Run of river hydro electricity
        base_tech: supply
        template: interest_rate_existing
        carrier_out: electricity
        #source_use_max: file=capacityfactors-hydro-ror.csv
        source_unit: per_cap
        lifetime: 60
        energy_ramping: 0.10
        cost_flow_cap:
          data: [0]  # Existing
          index: [monetary]
          dims: [costs]
        cost_flow_out:
          data: [5] # -- fixed: hydro run of river ( EUR2013/MW/yr) from [@JRC:2014] Table 14
          index: [monetary]
          dims: [costs]
        cost_om_annual:
          data: [150000]  # Table 8 Hydropower JRC
          index: [monetary]
          dims: [costs]


    existing_hydro_reservoir:
        name: Existing Hydro electricity with a reservoir.
        base_tech: supply
        template: interest_rate_existing
        include_storage: true
        carrier_out: electricity
        #source_use_max: file=capacityfactors-hydro-reservoir-inflow.csv
        source_unit: per_cap
        lifetime: 60
        flow_capacity_per_storage_cap_max: 0.15
        flow_capacity_per_storage_cap_min: 0.15
        cost_flow_out:
          data: [5.0] #  fixed: EUR/MWh from [@JRC:2014] Table 12
          index: [monetary]
          dims: [costs]
        cost_om_annual:
          data: [175000]  # (10,000 EUR2013/MW/yr) from [@JRC:2014] Table 12
          index: [monetary]
          dims: [costs]


    existing_nuclear:
        name: Nuclear power
        base_tech: conversion
        carrier_in: uranium
        template: interest_rate_existing
        carrier_out: electricity
        flow_out_eff: 0.4 # Eurocalliope
        lifetime: 50
        cost_flow_cap:
          data: [0]  # Existing
          index: [monetary]
          dims: [costs]
        cost_om_annual:
          data: [76116]  # EUR/MW 
          index: [monetary]
          dims: [costs]


    existing_coal: # This one will not increase
        name: 'Coal power plant'
        base_tech: conversion
        template: interest_rate_existing
        carrier_in: coal
        carrier_out: electricity
        flow_out_eff: 0.37 # [IEA (2012), Technology Roadmap - High-Efficiency, Low-Emissions Coal-Fired Power Generation, IEA, Paris https://www.iea.org/reports/technology-roadmap-high-efficiency-low-emissions-coal-fired-power-generation]
        energy_ramping: 0.6 # UK spanish_model
        lifetime: 30 # PNIEC
        #flow_cap_max: 11311 # MW  [PNIEC, table A.19]
        #flow_cap_min: 0     # Condition *2
        cost_flow_cap:
          data: [0] # Existing
          index: [monetary]
          dims: [costs]
        cost_flow_out:
          data: [3.21] # EUR/MWh_e 01 Coal CHP, Danish energy 2025
          index: [ monetary ]
          dims: [ costs ]
        cost_om_annual:
          data: [34324.40] # EUR/MW_e/y 01 Coal CHP, Danish energy 2025
          index: [monetary]
          dims: [costs]


    existing_ccgt: # This one will not increase source: 05 Gas turb. CC, steam extract. 2020
        name: Combined cycle gas turbine
        carrier_out: electricity
        carrier_in: natural_gas
        base_tech: conversion
        template: interest_rate_existing
        flow_out_eff: 0.58 # source: 05 Gas turb. CC, steam extract. 2020
        lifetime: 25
        energy_ramping: 0.15
        cost_flow_cap:
          data: [0]  # (EUR2015/MW) | Existing
          index: [monetary]
          dims: [costs]
        cost_om_annual:
          data: [31156.82]
          index: [monetary]
          dims: [costs]
        cost_flow_out:
          data: [4.678]
          index: [ monetary ]
          dims: [ costs ]


    existing_wte: # 08 WtE CHP, Medium, Danish enrgy agency
          name: "Waste-to-energy plant"
          base_tech: supply
          carrier_out: electricity
          template: interest_rate_existing
          flow_out_eff: 0.23
          lifetime: 24 # Italy spanish_model
          cost_flow_cap:
            data: [0] # Existing
            index: [monetary]
            dims: [costs]
          cost_flow_out:
            data: [26.9]
            index: [ monetary ]
            dims: [ costs ]
          cost_om_annual:
            data: [278603.7]
            index: [monetary]
            dims: [costs]


    existing_rooftop_pv: # 22 Rooftop PV residential
        name: 'existing rooftop PV'
        carrier_out: electricity
        base_tech: supply
        lifetime: 30
        source_unit: per_cap
        template: interest_rate_existing
        #resource_unit: energy_per_cap
        area_use_per_flow_cap: 0.00636 # Danish energy agency (technology data for el/dh, average of 22 photovoltaics small and medium, 2030)
        cost_flow_cap:
          data: [0] # Existing | Danish energy agency (technology data for el/dh, average of 22 photovoltaics small and medium, 2050)
          index: [monetary]
          dims: [costs]
        cost_om_annual:
          data: [16700]
          index: [monetary]
          dims: [costs]

    existing_open_field_pv: # 22 Utility-scale PV
        name: 'existing open field PV'
        carrier_out: electricity
        base_tech: supply
        template: interest_rate_existing
        lifetime: 25
        area_use_per_flow_cap: 0.02025 # Danish energy agency
        source_unit: per_cap
        #resource_unit: energy_per_cap
        cost_flow_cap:
          data: [0] # Existing|
          index: [monetary]
          dims: [costs]
        cost_om_annual:
          data: [13600]
          index: [monetary]
          dims: [costs]

















