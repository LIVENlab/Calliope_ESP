---
# ---------------------- Notes ------------------------

# 1* energy_cap will be computed as energy_cap group (eurocalliope) + cost of import from a specific country

templates:
  pv:   # general definition of PV
    name: PV
    carrier_out: electricity
    base_tech: supply
    lifetime: 30       # [@JRC:2014] Table 7
    template: interest_rate_new


  open_pv: # 22 Utility-scale PV
    name: open field PV
    carrier_out: electricity
    template: pv
    lifetime: 40       # [@JRC:2014] Table 7, EUROCALLIOPE
    area_use_per_flow_cap: 0.01226
    source_unit: per_cap
    open_field_pv_flag: true
    #resource_unit: per_cap
    cost_om_annual:
      data: [9500]         # (EUR2015/MW) | Danish energy agency (technology data for el/dh, 22 photovoltaics large, 2050)
      index: [monetary]
      dims: [costs]

  pv_on_roof:
    template: pv
    lifetime: 40         # [@JRC:2014] Table 7, EUROCALLIOPE
    source_unit: per_cap
    #resource_unit: per_cap
    area_use_per_flow_cap: 0.00457
    rooftop_pv_flag: true
    cost_om_annual:
      data: [10700]         # (EUR2015/MW) | Danish energy agency (technology data for el/dh, 22 photovoltaics large, 2050)
      index: [monetary]
      dims: [costs]
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  # (10,000 EUR2015/MW) | Danish energy agency (technology data for el/dh, average of 22 photovoltaics small and medium, 2050)

  wind_offshore:
    name: Wind offshore
    carrier_out: electricity
    base_tech: supply
    template: interest_rate_new
    source_unit: per_cap
    lifetime: 30         # [@JRC:2014] Table 5
    wind_offshore_flag: true
    cost_om_annual:
      data: [32493]         # (EUR2015/MW) | Danish energy agency (technology data for el/dh, 22 photovoltaics large, 2050)
      index: [monetary]
      dims: [costs]
    cost_flow_out:
      data: [2.4]
      index: [monetary]          # (EUR2013/MW) | Danish energy agency (technology data for el/dh, average of 21 offshore and nearshore turbines, 2050)
      dims: ['costs']


  wind_onshore:
    name: Onshore wind
    base_tech: supply
    template: interest_rate_new
    carrier_out: electricity
    source_unit: per_cap
    lifetime: 30         # [@JRC:2014] Table 4
    cost_om_annual:
      data: [16662.66]
      index: [monetary]
      dims: [costs]
    cost_flow_out:
      data: [1.98]
      index: [monetary]
      dims: ['costs']


  wind_onshore_monopoly:
    name: Onshore wind without land competition
    template: wind_onshore
    wind_onshore_monopoly_flag: true


  wind_onshore_competing:
    name: Onshore wind competing with open field PV on land
    template: wind_onshore
    area_use_per_flow_cap: 12.5 # from [@EuropeanEnvironmentAgency:2009]
    wind_onshore_competing_flag: true


  biomass:
    name: Solid biomass power plant
    base_tech: supply
    carrier_out: electricity
    template: interest_rate_new
    flow_out_eff: 0.28
    flow_ramping: 0.1 # Assumption
    flow_out_min_relative: 0.2 # Assumption
    lifetime: 25
    interest_rate: 0.10
    biomass_turbine_flag: true
    cost_flow_out:
      data: [ 4.75, 1330 ] # e/MWh Danish energy agency # ISPRA 2018
      index: [ monetary, co2 ]
      dims: costs
    cost_om_annual:
      data: [ 148872.18 ]
      index: [ monetary ]
      dims: costs
    cost_om_con:
      data: [1500]
      index: [monetary]
      dims: costs


  biogas_to_electricity_supply:   # based on Anaerobic digestion from [@JRC:2014] Table 48
    name: Electricity from anaerobically digested biofuel
    base_tech: supply
    template: interest_rate_new
    carrier_out: electricity
    flow_out_eff: 0.4        # efficiency modelled within the input resource stream to avoid poor numerical scaling
    lifetime: 25
    flow_ramping: 0.1 # Assumption
    storage_cap_max: .inf
    flow_capacity_per_storage_capacity_min: 0.0033
    flow_capacity_per_storage_capacity_max: 0.0033
    biogas_to_electricity_flag: true
    cost_om_annual:
      data: [9889.3662774]  # 06 Gas engines, biogas, 2030
      index: [monetary]
      dims: [costs]
    cost_flow_out:
      data: [7.443609026]
      index: [monetary]
      dims: [costs]


techs:
  # OPEN FIELD TECHNOLOGIES ### Photosensitive devices; unassembled photovoltaic cells and assembled photovoltaic modules/panels
  open_field_pv_CN:
    name: Open field PV CN
    template: open_pv
    cost_flow_cap:
      data: [58801, 155481, 0.4] # cost_flow_cap (€ /MW), kg CO2eq / MW, vulnerability
      index: [monetary, co2, vul]
      dims: [costs]

  open_field_pv_DE:
    name: Open field PV DE
    template: open_pv
    cost_flow_cap:
      data: [77489, 204915, 0.05] # cost_flow_cap (€ /MW), kg CO2eq / MW, vulnerability
      index: [monetary, co2, vul]
      dims: ['costs']

  open_field_pv_NL: # check NL, NDL... #TODO: Check
    name: Open field PV NL
    template: open_pv
    cost_flow_cap:
      data: [69593, 184035, 0.03]
      index: [monetary, co2, vul]
      dims: ['costs']

  open_field_pv_PT:
    name: Open field PV PT
    template: open_pv
    cost_flow_cap:
      data: [117709, 311275, 0.03]
      index: [monetary, co2, vul]
      dims: ['costs']

  open_field_pv_MY:
    name: Open field PV MY
    template: open_pv
    cost_flow_cap:
      data: [86668, 229190, 0.12]
      index: [monetary, co2, vul]
      dims: ['costs']

  open_field_pv_ESP:
    name: Open field PV ESP
    template: open_pv
    cost_flow_cap:
      data: [687476, 263720, 0.16]
      index: [monetary, co2, vul]
      dims: ['costs']

    # ROOFTOP PV ############### Photosensitive devices; unassembled photovoltaic cells and assembled photovoltaic modules/panels

  roof_mounted_pv_CN:
    name: Roof mounted PV CN
    template: pv_on_roof
    carrier_out: electricity
    cost_om_annual:
      data: [ 7900 ]         # (EUR2015/MW) | Danish energy agency (technology data for el/dh, 22 photovoltaics large, 2050)
      index: [ monetary ]
      dims: [ costs ]
    cost_flow_cap:
      data: [58801, 155497, 0.4]
      index: [monetary, co2, vul]
      dims: ['costs']


  roof_mounted_pv_DE:
    name: Roof mounted PV DE
    template: pv_on_roof
    carrier_out: electricity
    cost_om_annual:
      data: [ 7900 ]         # (EUR2015/MW) | Danish energy agency (technology data for el/dh, 22 photovoltaics large, 2050)
      index: [ monetary ]
      dims: [ costs ]
    cost_flow_cap:
      data: [77489, 204915, 0.05]
      index: [monetary, co2, vul]
      dims: ['costs']


  roof_mounted_pv_NL:
    name: Roof mounted PV NL
    template: pv_on_roof
    carrier_out: electricity
    cost_om_annual:
      data: [ 7900 ]         # (EUR2015/MW) | Danish energy agency (technology data for el/dh, 22 photovoltaics large, 2050)
      index: [ monetary ]
      dims: [ costs ]
    cost_flow_cap:
      data: [69593, 184035, 0.03]
      index: [monetary, co2, vul]
      dims: ['costs']


  roof_mounted_pv_PT:
    name: Roof mounted PV PT
    template: pv_on_roof
    carrier_out: electricity
    cost_om_annual:
      data: [ 7900 ]         # (EUR2015/MW) | Danish energy agency (technology data for el/dh, 22 photovoltaics large, 2050)
      index: [ monetary ]
      dims: [ costs ]
    cost_flow_cap:
      data: [117709, 311275, 0.03]
      index: [monetary, co2, vul]
      dims: ['costs']


  roof_mounted_pv_MY:
    name: Roof mounted PV MY
    template: pv_on_roof
    carrier_out: electricity
    cost_om_annual:
      data: [ 7900 ]         # (EUR2015/MW) | Danish energy agency (technology data for el/dh, 22 photovoltaics large, 2050)
      index: [ monetary ]
      dims: [ costs ]
    cost_flow_cap:
      data: [86668, 229190, 0.12]
      index: [monetary, co2, vul]
      dims: ['costs']

  roof_mounted_pv_ESP:
    name: Roof mounted PV - ESP
    template: pv_on_roof
    carrier_out: electricity
    cost_om_annual:
      data: [ 7900 ]         # (EUR2015/MW) | Danish energy agency (technology data for el/dh, 22 photovoltaics large, 2050)
      index: [ monetary ]
      dims: [ costs ]
    cost_flow_cap:
      data: [687476, 263720, 0.16]
      index: [monetary, co2, vul]
      dims: ['costs']


    #### WIND --> assumed " Wind-Powered Electric Generators \ All grouped in "wind"
  wind_onshore_monopoly_CN:
    name: Wind CN
    template: wind_onshore_monopoly
    wind_onshore_monopoly_flag: true
    cost_flow_cap:
      data: [49790,131655, 0.19]
      index: [monetary, co2, vul]
      dims: ['costs']

  wind_onshore_monopoly_IND:
    name: Wind IND
    template: wind_onshore_monopoly
    wind_onshore_monopoly_flag: true
    cost_flow_cap:
      data: [50435, 133358, 0.15]
      index: [monetary, co2, vul]
      dims: ['costs']


  wind_onshore_monopoly_DE:
    name: Wind DE
    template: wind_onshore_monopoly
    wind_onshore_monopoly_flag: true
    cost_flow_cap:
      data: [17337, 45843, 0.15]
      index: [monetary, co2, vul]
      dims: ['costs']


  wind_onshore_monopoly_PT:
    name: Wind PT
    template: wind_onshore_monopoly
    wind_onshore_monopoly_flag: true
    cost_flow_cap:
      data: [11905, 31480, 0.07]
      index: [monetary, co2, vul]
      dims: ['costs']


  wind_onshore_monopoly_FR:
    name: Wind FR
    template: wind_onshore_monopoly
    wind_onshore_monopoly_flag: true
    cost_flow_cap:
      data: [13122, 34697, 0.02]
      index: [monetary, co2, vul]
      dims: ['costs']


  wind_onshore_monopoly_NDL:
    name: Wind NDL
    template: wind_onshore_monopoly
    wind_onshore_monopoly_flag: true
    cost_flow_cap:
      data: [181182, 95055.3, 0.02]
      index: [monetary, co2, vul]
      dims: ['costs']

  wind_onshore_monopoly_ESP:
    name: Wind ESP
    template: wind_onshore_monopoly
    wind_onshore_monopoly_flag: true
    cost_flow_cap:
      data: [6748, 17843, 0.16]
      index: [monetary, co2, vul]
      dims: ['costs']


    # Wind onshore competition #######
  wind_onshore_competing_CN:
    name: Wind onshore competing CN
    template: wind_onshore_competing
    cost_flow_cap:
      data: [49790, 131655, 0.19]
      index: [monetary, co2, vul]
      dims: ['costs']


  wind_onshore_competing_IND:
    name: Wind onshore competing IND
    template: wind_onshore_monopoly
    cost_flow_cap:
      data: [50435, 133358, 0.15]
      index: [monetary, co2, vul]
      dims: ['costs']


  wind_onshore_competing_DE:
    name: Wind onshore competing DE
    template: wind_onshore_competing
    cost_flow_cap:
      data: [17337, 45843, 0.15]
      index: [monetary, co2, vul]
      dims: ['costs']


  wind_onshore_competing_PT:
    name: Wind onshore competing PT
    template: wind_onshore_competing
    cost_flow_cap:
      data: [11905, 31480, 0.07]
      index: [monetary, co2, vul]
      dims: ['costs']


  wind_onshore_competing_FR:
    name: Wind onshore competing FR
    template: wind_onshore_competing
    cost_flow_cap:
      data: [13122, 34697, 0.02]
      index: [monetary, co2, vul]
      dims: ['costs']


  wind_onshore_competing_NDL:
    name: Wind onshore competing NDL
    template: wind_onshore_competing
    cost_flow_cap:
      data: [6748, 17843, 0.02]
      index: [monetary, co2, vul]
      dims: ['costs']


  wind_onshore_competing_ESP:
    name: Wind onshore competing ESP
    template: wind_onshore_competing
    cost_flow_cap:
      data: [62013826, 7043261, 0.16]
      index: [monetary, co2, vul]
      dims: ['costs']

    # Offshore wind technologies
  wind_offshore_CN:
    name: Wind CN
    template: wind_offshore
    cost_flow_cap:
      data: [49790, 131655, 0.19]
      index: [monetary, co2, vul]
      dims: ['costs']


  wind_offshore_IND:
    name: Wind onffshore IND
    template: wind_offshore
    cost_flow_cap:
      data: [50435, 133358, 0.15]
      index: [monetary, co2, vul]
      dims: ['costs']


  wind_offshore_DE:
    name: Wind DE
    template: wind_offshore
    cost_flow_cap:
      data: [17337, 45843, 0.15]
      index: [monetary, co2, vul]
      dims: ['costs']


  wind_offshore_PT:
    name: Wind PT
    template: wind_offshore
    cost_flow_cap:
      data:  [11905, 31480, 0.07]
      index: [monetary, co2, vul]
      dims: ['costs']


  wind_offshore_FR:
    name: Wind FR
    template: wind_offshore
    cost_flow_cap:
      data: [13122, 34697, 0.02]
      index: [monetary, co2, vul]
      dims: ['costs']


  wind_offshore_NDL:
    name: Wind offshore NDL
    template: wind_offshore
    cost_flow_cap:
      data: [6748, 17843, 0.02]
      index: [monetary, co2, vul]
      dims: ['costs']


  wind_offshore_ESP:
    name: Wind offshore NDL
    template: wind_offshore
    cost_flow_cap:
      data: [62013826, 7043261, 0.16]
      index: [monetary, co2, vul]
      dims: ['costs']

    # biomass: Steam turbines > 40MW
  biomass_IT:
    name: biomass turbine IT
    template: biomass
    cost_flow_cap:
      data: [4440, 11739, 0.5]
      index: [monetary, co2, vul]
      dims: ['costs']


  biomass_FR:
    name: biomass turbine FR
    template: biomass
    cost_flow_cap:
      data: [147, 388, 0.5]
      index: [monetary, co2, vul]
      dims: ['costs']

  biomass_ESP:
    name: biomass turbine ESP
    template: biomass
    cost_flow_cap:
      data: [2844, 86, 0.5]
      index: [monetary, co2, vul]
      dims: ['costs']


    # Biogas power units--assumed 84118100, power up to 5000 kW
  biogas_to_electricity_supply_FR:
    name: Electricity from anaerobically digested biofuel-FR
    template: biogas_to_electricity_supply
    biogas_to_electricity_flag: true
    cost_flow_cap:
      data: [2836190, 7499390, 0.5]
      index: [monetary, co2, vul]
      dims: ['costs']


  biogas_to_electricity_supply_CAN:
    name: Electricity from anaerobically digested biofuel-CAN
    template: biogas_to_electricity_supply
    biogas_to_electricity_flag: true
    cost_flow_cap:
      data: [2444216, 6462942, 0.5]
      index: [monetary, co2, vul]
      dims: ['costs']


  biogas_to_electricity_supply_USA:
    name: Electricity from anaerobically digested biofuel-USA
    template: biogas_to_electricity_supply
    biogas_to_electricity_flag: true
    cost_flow_cap:
      data: [1463007, 3752886, 0.5]
      index: [monetary, co2, vul]
      dims: ['costs']


  biogas_to_electricity_supply_FSM:
    name: Electricity from anaerobically digested biofuel-FSM
    template: biogas_to_electricity_supply
    biogas_to_electricity_flag: true
    cost_flow_cap:
      data: [1419302, 3752886, 0.5]
      index: [monetary, co2, vul]
      dims: ['costs']


  biogas_to_electricity_supply_UK:
    name: Electricity from anaerobically digested biofuel-UK
    template: biogas_to_electricity_supply
    biogas_to_electricity_flag: true
    cost_flow_cap:
      data: [1976764, 5226915, 0.5]
      index: [monetary, co2, vul]
      dims: ['costs']


  biogas_to_electricity_supply_BEL:
    name: Electricity from anaerobically digested biofuel-BEL
    template: biogas_to_electricity_supply
    biogas_to_electricity_flag: true
    cost_flow_cap:
      data: [95855, 253458, 0.5]
      index: [monetary, co2, vul]
      dims: ['costs']

    # biogas_to_electricity_supply_ESP:   Removed as it has 0% share
    # name: Electricity from anaerobically digested biofuel-ESP
    # template: biogas_to_electricity_supply
    # cost_flow_cap:
    #   data: [1, 1, 0.5]
    #   index: [monetary, co2, vul]
    #   dims: ['costs']
